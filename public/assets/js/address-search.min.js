var AddressOpts={url:"https://www.bathnes.gov.uk/webapi/api/AddressesAPI/v2/search/",resultSize:50,minChars:3,useCache:"true",successCallback:buildAddressSelect};function addressSearch(){var s=$("#address").val(),e=s.toUpperCase().replace(/[^\w\s]|_/g,"").trim();s.length>=AddressOpts.minChars?$.ajax({type:"GET",url:AddressOpts.url+e+"/"+AddressOpts.resultSize+"/"+AddressOpts.useCache,contentType:"application/json; charset=utf-8",dataType:"json",success:function(d,a,r){if(void 0!==d){var t=[];$.each(d,function(d,a){a.full_Address=a.full_Address.replace(e,s.toUpperCase()),t.push({id:a.uprn+"_"+a.easting+"_"+a.northing+"_"+a.full_Address+"_"+a.payment_Address+"_"+a.ward,address:a.full_Address,search:a.full_Address})}),AddressOpts.successCallback&&AddressOpts.successCallback(t)}}}):clearAddressSelect()}function buildAddressSelect(s){var e=$("select#address-select");e.empty(),e.append($("<option />").val("").text("Please select")),$.each(s,function(){e.append($("<option />").val(this.address).text(this.address))})}function clearAddressSelect(){$("select#address-select").empty()}$(document).ready(function(){$("#address").on("keyup search",function(){addressSearch()})});